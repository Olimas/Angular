<div class="container container-block">
  <h2>Forms</h2>
  <hr>
  <div class="col-xs-8 col-xs-offset-2">
    <!--<form (ngSubmit)="submitForm()" #form="ngForm">-->
    <form (ngSubmit)="submitForm(form)"
          #form="ngForm"
    >
      <div ngModelGroup="user-group" #user="ngModelGroup">
        <div class="form-group">
          <label>Email</label>
          <input type="text"
                 class="form-control"
                 ngModel
                 name="email"
                 required
                 email
                 #email="ngModel"
                 [ngClass]="{'is-invalid': email.invalid && email.touched}"
          >
          <div *ngIf="email.invalid && email.touched" class="invalid-feedback">Введите корректный email</div>
          <button type="button" class="btn btn-primary" (click)="addRandomEmail()">Добавить случайный email</button>
        </div>
        <div class="form-group">
          <label>Пароль</label>
          <input type="password"
                 class="form-control"
                 ngModel
                 name="pass"
                 required
                 #pass="ngModel"
                 [ngClass]="{'is-invalid': pass.invalid && pass.touched}"
          >
          <div *ngIf="pass.invalid && pass.touched" class="invalid-feedback">Пароль не должен быть пустым</div>
        </div>
      </div>
      <div *ngIf="user.invalid && user.touched">Данные пользователя введены некорректно</div>
      <div class="form-group">
        <label>Выберите страну</label>
        <select class="form-control"
                [ngModel]="defaultCountry"
                name="country"
                required
                #country="ngModel"
                [ngClass]="{'is-invalid': country.invalid && country.touched}"
        >
          <option value="ru">Россия</option>
          <option value="by">Белоруссия</option>
          <option value="ua">Украина</option>
        </select>
      </div>
      <div class="radio" *ngFor="let ans of answers">
        <label>
          <input type="radio"
                 [value]="ans.type"
                 [ngModel]="defaultAnswer"
                 name="answer"
                 required
                 #answer="ngModel"
                 [ngClass]="{'is-invalid': answer.invalid && answer.touched}"
          > {{ans.text}}
        </label>
      </div>
      <button class="btn btn-success"
              type="submit"
              [disabled]="!form.valid"
      >Сохранить
      </button>
    </form>

    <div *ngIf="isSubmitted">
      <pre>
        {{formData | json}}
      </pre>
    </div>

  </div>
  <hr>
</div>
